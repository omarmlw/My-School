<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>اختبار الأطفال بالعربي</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Cairo', sans-serif;
      }
    </style>
    <!-- React and Babel CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      // --- Start of combined application code ---

      // From types.ts
      const Category = {
        RELIGIOUS: '🕌 دينية',
        HEALTH: '🍎 صحية',
        ACADEMIC: '📚 دراسية',
        HOME_BEHAVIOR: '🏡 سلوك في البيت',
        SOCIAL_BEHAVIOR: '🤝 سلوك اجتماعي',
      };

      const QuizState = {
        USER_INFO: 'USER_INFO',
        IN_PROGRESS: 'IN_PROGRESS',
        FINISHED: 'FINISHED',
      };

      // From constants.ts
      const TOTAL_QUESTIONS = 6;

      const QUESTIONS = [
        // Religious
        { text: 'هل صليت الفجر مع والديك؟', category: Category.RELIGIOUS },
        { text: 'هل تقول بسم الله قبل الأكل؟', category: Category.RELIGIOUS },
        { text: 'هل قرأت سورة قصيرة اليوم؟', category: Category.RELIGIOUS },
        { text: 'هل دعوت الله اليوم؟', category: Category.RELIGIOUS },
        { text: 'هل قلت دعاء الخروج من المنزل؟', category: Category.RELIGIOUS },
        { text: 'هل استمعت للقرآن مع والديك اليوم؟', category: Category.RELIGIOUS },
        { text: 'هل صليت العشاء في وقتها؟', category: Category.RELIGIOUS },
        { text: 'هل ساعدت أحدًا في معرفة دعاء أو سورة؟', category: Category.RELIGIOUS },
        { text: 'هل شكرت الله على نعمة الصحة؟', category: Category.RELIGIOUS },
        
        // Health
        { text: 'هل غسلت أسنانك هذا الصباح؟', category: Category.HEALTH },
        { text: 'هل غسلت يديك قبل الأكل؟', category: Category.HEALTH },
        { text: 'هل أكلت فطورك كاملًا؟', category: Category.HEALTH },
        { text: 'هل شربت ماء كافي اليوم؟', category: Category.HEALTH },
        { text: 'هل غسلت وجهك بعد الاستيقاظ؟', category: Category.HEALTH },
        { text: 'هل أكلت خضار أو فاكهة اليوم؟', category: Category.HEALTH },
        { text: 'هل قمت برياضة أو لعبت في الخارج؟', category: Category.HEALTH },
        { text: 'هل شربت الحليب اليوم؟', category: Category.HEALTH },
        { text: 'هل ارتحت بالنوم الكافي؟', category: Category.HEALTH },

        // Academic
        { text: 'هل راجعت دروسك؟', category: Category.ACADEMIC },
        { text: 'هل قمت بواجباتك؟', category: Category.ACADEMIC },
        { text: 'هل حضرت حقيبتك المدرسية؟', category: Category.ACADEMIC },
        { text: 'هل قرأت قصة قصيرة؟', category: Category.ACADEMIC },
        { text: 'هل كتبت واجباتك بخط مرتب؟', category: Category.ACADEMIC },
        { text: 'هل حفظت درسًا جديدًا اليوم؟', category: Category.ACADEMIC },
        { text: 'هل سألت معلمك عن شيء لم تفهمه؟', category: Category.ACADEMIC },
        { text: 'هل ساعدت زميلك في حل تمرين؟', category: Category.ACADEMIC },
        { text: 'هل قرأت كتابًا مفيدًا أو قصة قصيرة؟', category: Category.ACADEMIC },

        // Home Behavior
        { text: 'هل رتبت ألعابك بعد اللعب؟', category: Category.HOME_BEHAVIOR },
        { text: 'هل رتبت سريرك بعد الاستيقاظ؟', category: Category.HOME_BEHAVIOR },
        { text: 'هل ساعدت والدتك أو والدك؟', category: Category.HOME_BEHAVIOR },
        { text: 'هل كنت مطيعًا اليوم لوالديك؟', category: Category.HOME_BEHAVIOR },
        { text: 'هل ساعدت في ترتيب المائدة؟', category: Category.HOME_BEHAVIOR },
        { text: 'هل أطفأت الأنوار عند مغادرة الغرفة؟', category: Category.HOME_BEHAVIOR },
        { text: 'هل ألقيت القمامة في مكانها؟', category: Category.HOME_BEHAVIOR },
        { text: 'هل رتبت غرفتك قبل النوم؟', category: Category.HOME_BEHAVIOR },
        { text: 'هل ساعدت أخاك أو أختك في شيء؟', category: Category.HOME_BEHAVIOR },

        // Social Behavior
        { text: 'هل سلمت على معلمك أو جارك بابتسامة؟', category: Category.SOCIAL_BEHAVIOR },
        { text: 'هل شكرت من ساعدك؟', category: Category.SOCIAL_BEHAVIOR },
        { text: 'هل شاركت لعبتك مع صديقك؟', category: Category.SOCIAL_BEHAVIOR },
        { text: 'هل اعتذرت عندما أخطأت؟', category: Category.SOCIAL_BEHAVIOR },
        { text: 'هل قلت "السلام عليكم" عند دخولك على الآخرين؟', category: Category.SOCIAL_BEHAVIOR },
        { text: 'هل أعطيت مقعدك لشخص أكبر منك؟', category: Category.SOCIAL_BEHAVIOR },
        { text: 'هل التزمت بدورك في اللعب؟', category: Category.SOCIAL_BEHAVIOR },
        { text: 'هل شكرت معلمك في القسم؟', category: Category.SOCIAL_BEHAVIOR },
        { text: 'هل قلت "عفوًا" عندما أخطأت؟', category: Category.SOCIAL_BEHAVIOR },
      ];

      const getResultMessage = (score, name) => {
          const studentName = name ? ` يا ${name}` : '';
          if (score >= 5) {
              return `رائع${studentName}! ممتاز 👏`;
          }
          if (score >= 3) {
              return `أحسنت${studentName}! جيد جدًا`;
          }
          if (score === 2) {
              return `حسن${studentName}، اجتهد أكثر 💪`;
          }
          return `متوسط${studentName}، حاول مرة أخرى 😊`;
      };

      // From components/Footer.tsx
      const Footer = () => {
        return (
          <footer className="w-full text-center p-4 mt-auto">
            <a
              href="https://www.youtube.com/@Omaro"
              target="_blank"
              rel="noopener noreferrer"
              className="text-slate-500 hover:text-blue-600 transition-colors duration-300"
            >
              By OMAR MLW 2025
            </a>
          </footer>
        );
      };

      // From components/Header.tsx
      const Header = ({ userInfo }) => {
        return (
          <header className="w-full max-w-4xl bg-white/80 backdrop-blur-sm p-4 rounded-2xl shadow-lg border-2 border-purple-200 mb-6 text-slate-700">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 text-center md:text-right text-lg md:text-xl">
              <div className="font-bold">
                <span className="text-purple-600">المدرسة:</span> {userInfo.school}
              </div>
              <div className="font-bold">
                <span className="text-purple-600">الولاية:</span> {userInfo.stateName}
              </div>
              <div className="font-bold">
                <span className="text-purple-600">التلميذ(ة):</span> {userInfo.firstName} {userInfo.lastName}
              </div>
              <div className="font-bold">
                <span className="text-purple-600">المستوى:</span> {userInfo.grade}
              </div>
            </div>
          </header>
        );
      };
      
      // From components/UserInfoForm.tsx
      const UserInfoForm = ({ onStart }) => {
        const { useState } = React;
        const [userInfo, setUserInfo] = useState({
          school: '',
          stateName: '',
          firstName: '',
          lastName: '',
          grade: 'السنة الأولى',
        });

        const gradeLevels = [
          'السنة الأولى',
          'السنة الثانية',
          'السنة الثالثة',
          'السنة الرابعة',
          'السنة الخامسة',
        ];

        const handleChange = (e) => {
          const { name, value } = e.target;
          setUserInfo(prev => ({ ...prev, [name]: value }));
        };

        const handleSubmit = (e) => {
          e.preventDefault();
          if (Object.values(userInfo).every(field => field.trim() !== '')) {
            onStart(userInfo);
          } else {
            alert('الرجاء ملء جميع الحقول');
          }
        };

        return (
            <div className="bg-white text-center p-8 md:p-12 rounded-3xl shadow-2xl border-4 border-blue-300 w-full">
            <h1 className="text-4xl md:text-5xl font-bold text-blue-600 mb-6">
                أهلاً بك في اختبار الأطفال! ⭐
            </h1>
            <p className="text-lg md:text-xl text-slate-700 mb-8">
                الرجاء إدخال معلومات التلميذ(ة) لبدء الاختبار.
            </p>
            <form onSubmit={handleSubmit} className="space-y-4">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input
                    type="text"
                    name="school"
                    value={userInfo.school}
                    onChange={handleChange}
                    placeholder="اسم المدرسة"
                    className="w-full p-3 text-lg border-2 border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"
                    required
                />
                <input
                    type="text"
                    name="stateName"
                    value={userInfo.stateName}
                    onChange={handleChange}
                    placeholder="الولاية"
                    className="w-full p-3 text-lg border-2 border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"
                    required
                />
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input
                    type="text"
                    name="firstName"
                    value={userInfo.firstName}
                    onChange={handleChange}
                    placeholder="الإسم"
                    className="w-full p-3 text-lg border-2 border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"
                    required
                />
                <input
                    type="text"
                    name="lastName"
                    value={userInfo.lastName}
                    onChange={handleChange}
                    placeholder="اللقب"
                    className="w-full p-3 text-lg border-2 border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"
                    required
                />
                </div>
                <div>
                <select
                    name="grade"
                    value={userInfo.grade}
                    onChange={handleChange}
                    className="w-full p-3 text-lg border-2 border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"
                    required
                    aria-label="المستوى الدراسي"
                >
                    {gradeLevels.map(level => (
                    <option key={level} value={level}>{level}</option>
                    ))}
                </select>
                </div>
                <button
                type="submit"
                className="w-full md:w-auto bg-green-500 text-white font-bold text-2xl md:text-3xl py-4 px-12 rounded-full shadow-lg hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 transform hover:-translate-y-1 transition-all duration-300 mt-6"
                >
                ابدأ الاختبار 🌸
                </button>
            </form>
            </div>
        );
      };
      
      // From components/QuestionCard.tsx
      const QuestionCard = ({ question, questionNumber, totalQuestions, onAnswer }) => {
        return (
          <div className="bg-white p-6 md:p-10 rounded-3xl shadow-2xl border-4 border-purple-300 w-full animate-fade-in">
              <div className="text-center mb-6">
                  <div className="bg-purple-100 text-purple-700 font-bold py-2 px-4 rounded-full inline-block mb-4 text-lg">
                      {question.category}
                  </div>
                  <p className="text-xl md:text-2xl text-slate-600">
                      السؤال {questionNumber} من {totalQuestions}
                  </p>
              </div>
            
              <p className="text-3xl md:text-5xl font-bold text-center text-slate-800 mb-10 min-h-[100px] md:min-h-[150px] flex items-center justify-center">
                  {question.text}
              </p>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                  <button
                  onClick={() => onAnswer(true)}
                  className="flex items-center justify-center gap-4 bg-green-500 text-white font-bold text-3xl md:text-4xl py-6 rounded-2xl shadow-lg hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 transform hover:scale-105 transition-transform duration-300"
                  >
                  <span className="text-4xl">✅</span> نعم
                  </button>
                  <button
                  onClick={() => onAnswer(false)}
                  className="flex items-center justify-center gap-4 bg-red-500 text-white font-bold text-3xl md:text-4xl py-6 rounded-2xl shadow-lg hover:bg-red-600 focus:outline-none focus:ring-4 focus:ring-red-300 transform hover:scale-105 transition-transform duration-300"
                  >
                  <span className="text-4xl">❌</span> لا
                  </button>
              </div>
              <style>{`
                  @keyframes fade-in {
                      from { opacity: 0; transform: translateY(20px); }
                      to { opacity: 1; transform: translateY(0); }
                  }
                  .animate-fade-in {
                      animation: fade-in 0.5s ease-out forwards;
                  }
              `}</style>
          </div>
        );
      };

      // From components/ResultsScreen.tsx
      const ResultsScreen = ({ score, totalQuestions, onRestart, userInfo }) => {
        const resultMessage = getResultMessage(score, userInfo.firstName);
        
        return (
          <div className="bg-white text-center p-8 md:p-12 rounded-3xl shadow-2xl border-4 border-yellow-300 animate-pop-in">
            <h2 className="text-4xl md:text-6xl font-bold text-yellow-600 mb-4">
              النتيجة
            </h2>
            <p className="text-2xl md:text-3xl text-slate-700 mb-6">
              أجبت بـ '<span className="font-bold text-green-600">نعم</span>' على 
              <span className="font-bold text-2xl md:text-4xl mx-2 text-yellow-700">{score}</span>
              من أصل 
              <span className="font-bold text-2xl md:text-4xl mx-2 text-yellow-700">{totalQuestions}</span>
              أسئلة!
            </p>
            <p className="text-3xl md:text-5xl font-bold text-blue-600 my-8 bg-blue-100 p-4 rounded-xl">
              {resultMessage}
            </p>
            <button
              onClick={onRestart}
              className="w-full md:w-auto bg-blue-500 text-white font-bold text-2xl md:text-3xl py-4 px-12 rounded-full shadow-lg hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transform hover:-translate-y-1 transition-all duration-300"
            >
              العب مرة أخرى 😊
            </button>
             <style>{\`
                  @keyframes pop-in {
                      0% { opacity: 0; transform: scale(0.5); }
                      100% { opacity: 1; transform: scale(1); }
                  }
                  .animate-pop-in {
                      animation: pop-in 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
                  }
              \`}</style>
          </div>
        );
      };

      // From App.tsx
      const App = () => {
        const { useState, useCallback } = React;
        const [quizState, setQuizState] = useState(QuizState.USER_INFO);
        const [userInfo, setUserInfo] = useState(null);
        const [questions, setQuestions] = useState([]);
        const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
        const [yesAnswers, setYesAnswers] = useState(0);

        const shuffleArray = (array) => {
          const newArray = [...array];
          for (let i = newArray.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
          }
          return newArray;
        };

        const startQuiz = useCallback((newUserInfo) => {
          setUserInfo(newUserInfo);
          const shuffledQuestions = shuffleArray(QUESTIONS).slice(0, TOTAL_QUESTIONS);
          setQuestions(shuffledQuestions);
          setCurrentQuestionIndex(0);
          setYesAnswers(0);
          setQuizState(QuizState.IN_PROGRESS);
        }, []);

        const playAgain = useCallback(() => {
          const shuffledQuestions = shuffleArray(QUESTIONS).slice(0, TOTAL_QUESTIONS);
          setQuestions(shuffledQuestions);
          setCurrentQuestionIndex(0);
          setYesAnswers(0);
          setQuizState(QuizState.IN_PROGRESS);
        }, []);

        const handleAnswer = useCallback((answer) => {
          if (answer) {
            setYesAnswers(prev => prev + 1);
          }

          if (currentQuestionIndex < questions.length - 1) {
            setCurrentQuestionIndex(prev => prev + 1);
          } else {
            setQuizState(QuizState.FINISHED);
          }
        }, [currentQuestionIndex, questions.length]);

        const renderContent = () => {
          switch (quizState) {
            case QuizState.IN_PROGRESS:
              return (
                <QuestionCard
                  question={questions[currentQuestionIndex]}
                  questionNumber={currentQuestionIndex + 1}
                  totalQuestions={questions.length}
                  onAnswer={handleAnswer}
                />
              );
            case QuizState.FINISHED:
              if (!userInfo) return null;
              return (
                <ResultsScreen
                  score={yesAnswers}
                  totalQuestions={questions.length}
                  onRestart={playAgain}
                  userInfo={userInfo}
                />
              );
            case QuizState.USER_INFO:
            default:
              return <UserInfoForm onStart={startQuiz} />;
          }
        };

        return (
          <div className="bg-amber-100 min-h-screen flex flex-col items-center justify-center p-4">
            <div className="w-full max-w-4xl flex flex-col flex-grow">
              {userInfo && <Header userInfo={userInfo} />}
              <main className="w-full max-w-2xl mx-auto flex-grow flex items-center justify-center">
                {renderContent()}
              </main>
            </div>
            <Footer />
          </div>
        );
      };

      // From index.tsx
      const rootElement = document.getElementById('root');
      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
      // --- End of combined application code ---
    </script>
  </body>
</html>